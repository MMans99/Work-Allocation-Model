{% extends "base-anon.html" %}
{% from "render/field_errors.html" import render_field_errors %}
{% from "render/flashed_messages.html" import render_flashed_messages %}

{% block title %}WLAM - Set password{% endblock %}
{% block styles %}
<link href="{{ url_for('static', filename='css/reset_password.css') }}" rel="stylesheet">{% endblock %}
{% block class %}class="form-reset_password"{% endblock %}
{% block content %}
<form action='{{ url_for('anon.reset_password', id=id, code=code) }}' method='POST' autocomplete="off"
    oninput='password_confirm.setCustomValidity(password_confirm.value != password.value ? "Passwords do not match." : "")'>
    {{ form.csrf_token }}

    <img class="img-fluid mb-4" src="{{ url_for('static', filename='img/University_of_Sharjah_Logo.png') }}" alt="">
    {{ render_flashed_messages(get_flashed_messages(with_categories=True)) }}

    <h1 class="h3 mb-3 fw-normal">Set a new password</h1>

    {{ form.password }}
    {{ render_field_errors(form.password.errors) }}
    <div style="height: 4px;"></div>
    
    {{ form.password_repeat }}
    {{ render_field_errors(form.password_repeat.errors) }}
    <br>

    {{ form.submit }}

    <p class="mt-3 mb-3"><a href="{{ url_for('anon.signin') }}">Have an account? Sign in!</a></p>

    <p class="mt-5 mb-3 text-muted">Â© University of Sharjah - 2021</p>
</form>
{% endblock %}